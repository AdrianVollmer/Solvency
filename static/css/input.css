@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    @apply scroll-smooth;
  }

  body {
    @apply antialiased bg-neutral-50 text-neutral-900 dark:bg-neutral-900 dark:text-neutral-100;
  }

  /* Headings use display font */
  h1, h2, h3, h4, h5, h6 {
    @apply font-display;
  }

  /* Improved focus ring - high contrast */
  :focus-visible {
    @apply outline-none ring-2 ring-primary-500 ring-offset-2 ring-offset-white dark:ring-offset-neutral-900;
  }

  /* Selection styling */
  ::selection {
    @apply bg-primary-100 dark:bg-primary-900/50;
  }

  /* Respect reduced motion */
  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}

@layer components {
  /* Buttons - refined micro-interactions */
  .btn {
    @apply px-4 py-2.5 rounded-lg font-medium focus:outline-none focus:ring-2 focus:ring-offset-2;
    transition: background-color 150ms ease-out, transform 100ms ease-out, box-shadow 150ms ease-out;
  }

  .btn:hover {
    transform: translateY(-1px);
  }

  .btn:active {
    transform: translateY(0);
    transition-duration: 50ms;
  }

  .btn-primary {
    @apply bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
  }

  .btn-primary:hover {
    box-shadow: 0 4px 6px -1px rgba(79, 70, 229, 0.2);
  }

  .btn-secondary {
    @apply bg-neutral-200 text-neutral-800 hover:bg-neutral-300 dark:bg-neutral-700 dark:text-neutral-200 dark:hover:bg-neutral-600 focus:ring-neutral-500;
  }

  .btn-ghost {
    @apply bg-transparent text-neutral-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-neutral-800 focus:ring-neutral-500;
  }

  .btn-ghost:hover {
    transform: none;
  }

  /* Form inputs - smooth focus transitions */
  .input {
    @apply px-4 py-2.5 border border-neutral-300 dark:border-neutral-600 rounded-lg bg-white dark:bg-neutral-800 focus:ring-2 focus:ring-primary-500 focus:border-transparent;
    transition: border-color 150ms ease-out, box-shadow 150ms ease-out, background-color 150ms ease-out;
  }

  .input:hover:not(:focus) {
    @apply border-neutral-400 dark:border-neutral-500;
  }

  /* Cards - use sparingly, subtle depth on hover */
  .card {
    @apply bg-white dark:bg-neutral-800 rounded-xl border border-neutral-200 dark:border-neutral-700;
    transition: box-shadow 200ms ease-out, border-color 200ms ease-out;
  }

  .card-interactive {
    @apply card cursor-pointer;
  }

  .card-interactive:hover {
    @apply border-neutral-300 dark:border-neutral-600;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
  }

  /* Section headers */
  .section-title {
    @apply font-display text-xl font-semibold tracking-tight text-neutral-900 dark:text-white;
  }

  /* Page titles */
  .page-title {
    @apply font-display text-2xl font-bold tracking-tight text-neutral-900 dark:text-white;
  }

  /* Subtle text */
  .text-muted {
    @apply text-neutral-500 dark:text-neutral-400;
  }

  /* Links - subtle underline animation */
  .link {
    @apply text-primary-600 dark:text-primary-400;
    text-decoration: underline;
    text-decoration-color: transparent;
    text-underline-offset: 2px;
    transition: text-decoration-color 150ms ease-out;
  }

  .link:hover {
    text-decoration-color: currentColor;
  }

  /* Active nav item - left border accent with smooth transitions */
  .nav-item {
    @apply flex items-center gap-3 px-4 py-2.5 text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white;
    transition: color 150ms ease-out, background-color 150ms ease-out;
  }

  .nav-item:hover {
    @apply bg-neutral-100/50 dark:bg-neutral-800/50;
  }

  .nav-item-active {
    @apply text-primary-600 dark:text-primary-400 border-l-2 border-primary-600 dark:border-primary-400 -ml-[2px] bg-primary-50/50 dark:bg-primary-900/10;
  }

  /* Amount display */
  .amount-negative {
    @apply text-red-600 dark:text-red-400;
  }

  .amount-positive {
    @apply text-accent-600 dark:text-accent-400;
  }

  /* Pill/badge */
  .pill {
    @apply inline-flex items-center px-2.5 py-1 text-xs font-medium rounded-full;
  }

  /* Filter chip */
  .chip {
    @apply px-3 py-1.5 text-sm rounded-lg transition-colors;
  }

  .chip-active {
    @apply bg-primary-600 text-white;
  }

  .chip-inactive {
    @apply bg-neutral-100 text-neutral-700 hover:bg-neutral-200 dark:bg-neutral-800 dark:text-neutral-300 dark:hover:bg-neutral-700;
  }
}

@layer utilities {
  /* HTMX loading states - smooth transitions */
  .htmx-request .htmx-indicator {
    @apply opacity-100;
  }

  .htmx-indicator {
    @apply opacity-0;
    transition: opacity 150ms ease-out;
  }

  /* Subtle loading state for HTMX requests */
  .htmx-request {
    pointer-events: none;
  }

  .htmx-request:not(.htmx-indicator) {
    opacity: 0.7;
    transition: opacity 100ms ease-out;
  }

  /* Tabular numbers for amounts */
  .tabular-nums {
    font-variant-numeric: tabular-nums;
  }

  /* Success checkmark animation */
  @keyframes checkmark-draw {
    0% {
      stroke-dashoffset: 24;
    }
    100% {
      stroke-dashoffset: 0;
    }
  }

  .checkmark-animated {
    stroke-dasharray: 24;
    stroke-dashoffset: 24;
    animation: checkmark-draw 300ms ease-out forwards;
    animation-delay: 100ms;
  }

  /* Fade in animation for new elements */
  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translateY(-4px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in {
    animation: fade-in 200ms ease-out;
  }

  /* Subtle scale animation for success states */
  @keyframes success-scale {
    0% {
      transform: scale(0.95);
      opacity: 0;
    }
    50% {
      transform: scale(1.02);
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }

  .animate-success {
    animation: success-scale 250ms ease-out;
  }

  /* Table row hover transition */
  .row-hover {
    transition: background-color 100ms ease-out;
  }
}
