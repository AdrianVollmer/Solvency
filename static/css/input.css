@tailwind base;
@tailwind components;
@tailwind utilities;

/* Easing curves - exponential for natural deceleration */
:root {
  --ease-out-quart: cubic-bezier(0.25, 1, 0.5, 1);
  --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
}

@layer base {
  html {
    @apply scroll-smooth;
  }

  body {
    @apply antialiased bg-neutral-50 text-neutral-900 dark:bg-neutral-900 dark:text-neutral-100;
  }

  /* Headings use display font */
  h1, h2, h3, h4, h5, h6 {
    @apply font-display;
  }

  /* Improved focus ring - high contrast */
  :focus-visible {
    @apply outline-none ring-2 ring-primary-500 ring-offset-2 ring-offset-white dark:ring-offset-neutral-900;
  }

  /* Selection styling */
  ::selection {
    @apply bg-primary-100 dark:bg-primary-900/50;
  }

  /* Respect reduced motion */
  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}

@layer components {
  /* Icons - inline SVG sizing */
  .icon-xs {
    @apply inline-flex w-4 h-4;
  }
  .icon-xs > svg {
    @apply w-4 h-4;
  }

  .icon-sm {
    @apply inline-flex w-5 h-5;
  }
  .icon-sm > svg {
    @apply w-5 h-5;
  }

  .icon-md {
    @apply inline-flex w-6 h-6;
  }
  .icon-md > svg {
    @apply w-6 h-6;
  }

  .icon-lg {
    @apply inline-flex w-8 h-8;
  }
  .icon-lg > svg {
    @apply w-8 h-8;
  }

  .icon-xl {
    @apply inline-flex w-10 h-10;
  }
  .icon-xl > svg {
    @apply w-10 h-10;
  }

  /* Buttons - refined micro-interactions */
  .btn {
    @apply px-4 py-2.5 rounded-lg font-medium focus:outline-none focus:ring-2 focus:ring-offset-2;
    transition: background-color 150ms var(--ease-out-quart), transform 100ms var(--ease-out-quart), box-shadow 150ms var(--ease-out-quart);
  }

  .btn:hover:not(:disabled) {
    transform: translateY(-1px);
  }

  .btn:active:not(:disabled) {
    transform: translateY(0);
    transition-duration: 50ms;
  }

  .btn:disabled {
    @apply opacity-50 cursor-not-allowed;
  }

  .btn-primary {
    @apply bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
  }

  .btn-primary:hover:not(:disabled) {
    box-shadow: 0 4px 6px -1px rgba(79, 70, 229, 0.2);
  }

  .btn-secondary {
    @apply bg-neutral-200 text-neutral-800 hover:bg-neutral-300 dark:bg-neutral-700 dark:text-neutral-200 dark:hover:bg-neutral-600 focus:ring-neutral-500;
  }

  .btn-ghost {
    @apply bg-transparent text-neutral-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-neutral-800 focus:ring-neutral-500;
  }

  .btn-ghost:hover {
    transform: none;
  }

  /* Danger button for destructive actions */
  .btn-danger {
    @apply bg-red-600 text-white hover:bg-red-700 focus:ring-red-500;
  }

  /* Form inputs - smooth focus transitions */
  .input {
    @apply px-4 py-2.5 border border-neutral-300 dark:border-neutral-600 rounded-lg bg-white dark:bg-neutral-800 focus:ring-2 focus:ring-primary-500 focus:border-transparent;
    transition: border-color 150ms var(--ease-out-quart), box-shadow 150ms var(--ease-out-quart), background-color 150ms var(--ease-out-quart);
  }

  .input:hover:not(:focus):not(:disabled) {
    @apply border-neutral-400 dark:border-neutral-500;
  }

  .input:disabled {
    @apply opacity-50 cursor-not-allowed bg-neutral-100 dark:bg-neutral-900;
  }

  /* Cards - use sparingly, subtle depth on hover */
  .card {
    @apply bg-white dark:bg-neutral-800 rounded-xl border border-neutral-200 dark:border-neutral-700;
    transition: box-shadow 200ms var(--ease-out-quart), border-color 200ms var(--ease-out-quart);
  }

  .card-interactive {
    @apply card cursor-pointer;
  }

  .card-interactive:hover {
    @apply border-neutral-300 dark:border-neutral-600;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
  }

  .dark .card-interactive:hover {
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.2), 0 2px 4px -1px rgba(0, 0, 0, 0.1);
  }

  /* Section headers */
  .section-title {
    @apply font-display text-xl font-semibold tracking-tight text-neutral-900 dark:text-white;
  }

  /* Page titles */
  .page-title {
    @apply font-display text-2xl font-bold tracking-tight text-neutral-900 dark:text-white;
  }

  /* Net Worth Hero Display - dramatic, confident typography */
  .net-worth-hero {
    @apply font-display font-bold tracking-tighter leading-none tabular-nums;
    font-size: clamp(2.5rem, 8vw, 4.5rem);
  }

  .net-worth-positive {
    @apply text-neutral-900 dark:text-white;
  }

  .net-worth-negative {
    @apply text-red-600 dark:text-red-400;
  }

  /* Subtle text */
  .text-muted {
    @apply text-neutral-500 dark:text-neutral-400;
  }

  /* Links - subtle underline animation */
  .link {
    @apply text-primary-600 dark:text-primary-400;
    text-decoration: underline;
    text-decoration-color: transparent;
    text-underline-offset: 2px;
    transition: text-decoration-color 150ms var(--ease-out-quart);
  }

  .link:hover {
    text-decoration-color: currentColor;
  }

  /* Active nav item - left border accent with smooth transitions */
  .nav-item {
    @apply flex items-center gap-3 px-4 py-2.5 text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white;
    transition: color 150ms var(--ease-out-quart), background-color 150ms var(--ease-out-quart);
  }

  .nav-item:hover {
    @apply bg-neutral-100/50 dark:bg-neutral-800/50;
  }

  .nav-item-active {
    @apply text-primary-600 dark:text-primary-400 border-l-2 border-primary-600 dark:border-primary-400 -ml-[2px] bg-primary-50/50 dark:bg-primary-900/10;
  }

  .nav-item-active:hover {
    @apply bg-primary-50 dark:bg-primary-900/20;
  }

  /* Amount display */
  .amount-negative {
    @apply text-red-600 dark:text-red-400;
  }

  .amount-positive {
    @apply text-accent-600 dark:text-accent-400;
  }

  /* Pill/badge */
  .pill {
    @apply inline-flex items-center px-2.5 py-1 text-xs font-medium rounded-full;
  }

  /* Filter chip */
  .chip {
    @apply px-3 py-1.5 text-sm rounded-lg;
    transition: background-color 150ms var(--ease-out-quart), color 150ms var(--ease-out-quart);
  }

  .chip-active {
    @apply bg-primary-600 text-white;
  }

  .chip-inactive {
    @apply bg-neutral-100 text-neutral-700 hover:bg-neutral-200 dark:bg-neutral-800 dark:text-neutral-300 dark:hover:bg-neutral-700;
  }

  /* Select inputs */
  .select {
    @apply input appearance-none bg-no-repeat pr-10;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.5rem center;
    background-size: 1.5em 1.5em;
  }

  .dark .select {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%239ca3af' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
  }
}

@layer utilities {
  /* HTMX loading states - smooth transitions */
  .htmx-request .htmx-indicator {
    @apply opacity-100;
  }

  .htmx-indicator {
    @apply opacity-0;
    transition: opacity 150ms var(--ease-out-quart);
  }

  /* Subtle loading state for HTMX requests */
  .htmx-request {
    pointer-events: none;
  }

  .htmx-request:not(.htmx-indicator) {
    opacity: 0.7;
    transition: opacity 100ms var(--ease-out-quart);
  }

  /* Tabular numbers for amounts */
  .tabular-nums {
    font-variant-numeric: tabular-nums;
  }

  /* Success checkmark animation */
  @keyframes checkmark-draw {
    0% {
      stroke-dashoffset: 24;
    }
    100% {
      stroke-dashoffset: 0;
    }
  }

  .checkmark-animated {
    stroke-dasharray: 24;
    stroke-dashoffset: 24;
    animation: checkmark-draw 300ms var(--ease-out-expo) forwards;
    animation-delay: 100ms;
  }

  /* Fade in animation for new elements */
  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translateY(-4px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in {
    animation: fade-in 200ms var(--ease-out-expo);
  }

  /* Subtle scale animation for success states */
  @keyframes success-scale {
    0% {
      transform: scale(0.97);
      opacity: 0;
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }

  .animate-success {
    animation: success-scale 200ms var(--ease-out-expo);
  }

  /* Table row hover transition */
  .row-hover {
    transition: background-color 100ms var(--ease-out-quart);
  }
}
