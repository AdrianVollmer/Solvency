<div class="overflow-x-auto">
    <table class="min-w-full divide-y divide-neutral-200 dark:divide-neutral-700">
        <thead class="bg-neutral-50 dark:bg-neutral-900">
            <tr>
                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-400 uppercase tracking-wider">Row</th>
                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-400 uppercase tracking-wider">Date</th>
                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-400 uppercase tracking-wider">Symbol</th>
                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-400 uppercase tracking-wider">Type</th>
                <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-neutral-500 dark:text-neutral-400 uppercase tracking-wider">Qty</th>
                <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-neutral-500 dark:text-neutral-400 uppercase tracking-wider">Price</th>
                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-400 uppercase tracking-wider">Currency</th>
                <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-neutral-500 dark:text-neutral-400 uppercase tracking-wider">Fee</th>
            </tr>
        </thead>
        <tbody class="bg-white dark:bg-neutral-800 divide-y divide-neutral-200 dark:divide-neutral-700">
            {% for row in rows %}
            <tr class="{% if row.status == "error" %}bg-red-50 dark:bg-red-900/10{% endif %}">
                <td class="px-4 py-3 whitespace-nowrap text-sm text-neutral-500 dark:text-neutral-400">{{ row.data.row_number }}</td>
                <td class="px-4 py-3 whitespace-nowrap text-sm text-neutral-900 dark:text-white">{{ row.data.date }}</td>
                <td class="px-4 py-3 whitespace-nowrap text-sm font-medium text-neutral-900 dark:text-white">{{ row.data.symbol }}</td>
                <td class="px-4 py-3 whitespace-nowrap text-sm text-neutral-900 dark:text-white">{{ row.data.activity_type_label() }}</td>
                <td class="px-4 py-3 whitespace-nowrap text-sm text-neutral-900 dark:text-white text-right">{{ row.data.quantity_display() }}</td>
                <td class="px-4 py-3 whitespace-nowrap text-sm text-neutral-900 dark:text-white text-right">{{ row.data.unit_price_display() }}</td>
                <td class="px-4 py-3 whitespace-nowrap text-sm text-neutral-500 dark:text-neutral-400">{{ row.data.currency }}</td>
                <td class="px-4 py-3 whitespace-nowrap text-sm text-neutral-500 dark:text-neutral-400 text-right">{{ row.data.fee_display() }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{# Pagination #}
{% if total_count > page_size %}
<div class="px-6 py-4 border-t border-neutral-200 dark:border-neutral-700 flex items-center justify-between">
    <p class="text-sm text-neutral-600 dark:text-neutral-400">
        Showing {{ (page - 1) * page_size + 1 }} to {% if page * page_size < total_count %}{{ page * page_size }}{% else %}{{ total_count }}{% endif %} of {{ total_count }} rows
    </p>
    <div class="flex gap-2">
        {% if page > 1 %}
        <button hx-get="/trading/import/{{ session_id }}/rows?page={{ page - 1 }}" hx-swap="innerHTML" hx-target="closest div"
            class="px-3 py-1 text-sm border border-neutral-200 dark:border-neutral-700 rounded hover:bg-neutral-50 dark:hover:bg-neutral-700">
            Previous
        </button>
        {% endif %}
        {% if page * page_size < total_count %}
        <button hx-get="/trading/import/{{ session_id }}/rows?page={{ page + 1 }}" hx-swap="innerHTML" hx-target="closest div"
            class="px-3 py-1 text-sm border border-neutral-200 dark:border-neutral-700 rounded hover:bg-neutral-50 dark:hover:bg-neutral-700">
            Next
        </button>
        {% endif %}
    </div>
</div>
{% endif %}
