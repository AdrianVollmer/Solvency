{% extends "base.html" %}
{% import "macros/ui.html" as ui %}

{% block content %}
<div class="space-y-8">
    {% call ui::page_header(title="Dashboard", subtitle="Your spending overview") %}{% endcall %}

    {# Hero metric - This Month (asymmetric, larger) #}
    <div class="flex flex-col md:flex-row md:items-end gap-6 md:gap-12">
        <div>
            <p class="text-sm font-medium text-neutral-500 dark:text-neutral-400 uppercase tracking-wide">This Month</p>
            <p class="mt-1 font-display text-4xl md:text-5xl font-bold tracking-tight tabular-nums {% if total_this_month < 0 %}text-red-600 dark:text-red-400{% else %}text-accent-600 dark:text-accent-400{% endif %}">
                {{ settings.format_money(total_this_month)|safe }}
            </p>
        </div>
        <div class="flex gap-8 text-sm">
            <div>
                <p class="text-neutral-500 dark:text-neutral-400">Last month</p>
                <p class="mt-0.5 font-semibold tabular-nums">{{ settings.format_money(total_last_month)|safe }}</p>
            </div>
            <div>
                <p class="text-neutral-500 dark:text-neutral-400">Transaction count</p>
                <p class="mt-0.5 font-semibold tabular-nums">{{ expense_count }}</p>
            </div>
        </div>
    </div>

    {# Recent Expenses - simple list, no card wrapper #}
    <section>
        <div class="flex items-center justify-between mb-4">
            <h2 class="section-title">Recent Transactions</h2>
            <a href="/expenses" class="text-sm text-primary-600 dark:text-primary-400 hover:underline">View all</a>
        </div>

        <div class="bg-white dark:bg-neutral-800 rounded-xl border border-neutral-200 dark:border-neutral-700 divide-y divide-neutral-100 dark:divide-neutral-700">
            {% for expense in recent_expenses %}
            <a href="/expenses/{{ expense.id }}" class="flex items-center justify-between p-4 hover:bg-neutral-50 dark:hover:bg-neutral-700/50 row-hover">
                <div class="min-w-0 flex-1">
                    <p class="font-medium truncate">{{ expense.description }}</p>
                    <p class="text-sm text-neutral-500 dark:text-neutral-400">
                        {{ expense.category_name_or_default() }} Â· {{ expense.date }}
                    </p>
                </div>
                <span class="ml-4 font-semibold tabular-nums whitespace-nowrap {% if expense.amount_cents < 0 %}text-red-600 dark:text-red-400{% else %}text-accent-600 dark:text-accent-400{% endif %}">
                    {{ settings.format_money(expense.amount_cents)|safe }}
                </span>
            </a>
            {% else %}
            <div class="p-8 text-center">
                <p class="text-neutral-500 dark:text-neutral-400">No transactions yet</p>
                <a href="/expenses" class="mt-2 inline-block text-primary-600 dark:text-primary-400 hover:underline">Add your first transaction</a>
            </div>
            {% endfor %}
        </div>
    </section>
</div>
{% endblock %}
